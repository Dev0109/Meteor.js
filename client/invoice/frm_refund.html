<template name="refundcard">
  <div class="container-fluid salesmodule" style="padding-right: 0px;padding-left: 0px;">
    <div class="fullScreenSpin" style="display:none;">
      <div class="spinner"></div>
    </div>

    <style>
      @media screen and (max-width: 387px) {
        .btnSettings {
          padding: 0px !important;
          font-size: 16px !important;
        }

        h2 {
          font-size: 24px;
        }
      }

      @media screen and (max-height: 450px) and (max-width: 950px) {
        .colPaid {
          display: block !important;
        }

        #colBalanceDue {
          /* display: none !important; */
        }
      }

      @media screen and (max-width: 450px) {
        .btnTransaction {
          width: 80% !important;
        }

        .payNow {
          margin-right: 8px !important;
        }

        .btnMakePayment {
          margin-left: 8px !important;
        }

        .colBtn {
          padding: 0px;
        }

        .colPaid {
          display: block !important;
        }

        #colBalanceDue {
          /* display: none !important; */
        }
      }

      .templateItem {
        display: inline-flex !important;

      }

      .btnPreviewTemplate {
        padding: 6px;
        cursor: pointer;
      }

      .btnPreviewTemplate:hover {
        background-color: #f8f9fc;
      }

      #tblInvoiceLine_length,
      #tblInvoiceLine_filter {
        display: none;
      }

      .colUnitPriceEx,
      .colUnitPriceInc,
      .colAmountEx,
      .colAmountInc {
        cursor: pointer;
      }

      .lead {
        font-size: 25px;
        font-weight: 500;
        margin: 0px;
        color: #696969;
        float: right;
      }

      .leadTotal {
        font-weight: 800 !important;
      }

      .leadHidden {
        visibility: hidden;
        height: 0px !important;
      }

      @media screen and (min-width: 1366px) {
        .colComments {
          padding-right: 2.5rem;
        }
      }

      @media screen and (max-width: 450px) {
        .desktopButtons {
          display: none;
        }

        .mobileButtons {
          display: flex !important;
        }
      }

      .paidIcon {
        animation: blink 2s ease-in infinite;
        -webkit-animation: blink 2s ease-in infinite;
      }
    </style>

    {{#if invoicerecord}}
    <form>
       <!-- Header -->
       {{> transaction_header
        cardType="Invoice"
        data=invoicerecord
        uploadedFile=uploadedFile
        isCurrencyEnable=isCurrencyEnable
        custfields=custfields
        showUploadAttachment=true
        showTransactionButtons=false
        salesCloudPreferenceRec=salesCloudPreferenceRec
        showCustomer=true
        showBilingAddress=true
        showSalesDate=true
        showPONumber=true
        showInvoiceNumber=false
        showVia=false
        showTerms=true
        showStatus=true
        showReference=true
        showDepartment=true
        showCustomFields=true
        showShippingInfo=true
        showPayment=true
        showCopyTransaction=true
        showCopyToInvoice=false
        showCopyToOrder=false
      }}
      <!-- End Header -->
      <div>
        {{> transaction_line
          tablename="tblInvoiceLine"
          recordLineItems=invoicerecord.LineItems
          isForeignEnabled=isForeignEnabled
          canShowBackOrder=false
          canShowUOM=false
          includeBOnShippedQty=false
          isBatchSerialNoTracking=isBatchSerialNoTracking
          getDefaultCurrency=getDefaultCurrency
          }}
        {{> deletepop itemName1="Refund" itemName2="refund" itemName3="Refund" button1="btnDeleteRefund" button2="btnDeleteFollowingRefunds"}}
      </div>

      <div class="row align-items-end" style="margin: 16px;">
        <div class="col-12 col-lg-8 col-xl-10" style="padding-right: 24px;">
          <div class="row">
            <button class="btn btn-primary" type="button" id="addRow" style="margin-bottom: 36px; margin-left: 16px;">+
              Add New Entry</button>
          </div>
          <div class="row">
            <div class="col-12 col-md-6">
              <div class="form-group"><label>Comments</label>
                <textarea class="form-control" rows="6" id="txaComment"
                  name="txaComment">{{invoicerecord.comments}}</textarea>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="form-group"><label>Picking Instructions</label>
                <textarea class="form-control" rows="6" id="txapickmemo"
                  name="txapickmemo">{{invoicerecord.pickmemo}}</textarea>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-12 col-md-12">
              <div class="row justify-content-center desktopButtons">
                {{> transaction_footer margin="16px" AttachmentCount=attachmentCount TransactionType="refunds" }}
              </div>
            </div>
          </div>
          <!-- <div class="row justify-content-center desktopButtons">
                            <button class="btn btn-success btnSave btnFooter" type="button" style="margin: 16px;margin-top: 0px;width: 100px;">
                                <i class="fa fa-save" style="padding-right: 8px;"></i>Save
                            </button>

                            <button class="btn btn-primary printConfirm btnFooter" type="button" style="margin: 16px;margin-top: 0px;width: 100px;">
                                <i class="fa fa-print" style="padding-right: 8px;"></i>Print
                            </button>

                            <a class="btn btn-primary btn_Attachment btnFooter" role="button" style="margin: 16px;margin-top: 0px;" data-toggle="modal" href="#myModalAttachment" id="btn_Attachment" name="btn_Attachment">
                                {{#if attachmentCount}}<span id="attachment-count">{{attachmentCount}}</span>{{/if}} <i class="fa fa-paperclip" style="padding-right: 8px;"></i>Add Attachments
                            </a>

                            <button class="btn btn-secondary btnBack btnFooter" type="button" style="margin: 16px;margin-top: 0px;width: 100px;">
                                <i class="fa fa-remove" style="padding-right: 8px;"></i>Cancel
                            </button>
                        </div> -->
        </div>

        <div class="modal fade" role="dialog" tabindex="-1" id="confirmprint">
          <div class="modal-dialog modal-dialog-centered modal-sm">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="">Print Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>

              <div class="modal-body">

                <div class="custom-control custom-checkbox">
                  <input class="custom-control-input favCheckBox chkBankingReport" checked name="print_refund_second"
                    type="checkbox" id="print_refund_second" autocomplete="off">
                  <label style="cursor: pointer;" class="custom-control-label" for="print_refund_second">Print
                    Refund</label>
                </div>

              </div>

              <div class="modal-footer ">
                <button class="btn btn-primary printConfirm btnFooter" type="button"><i class="fa fa-print"
                    style="margin-right: 5px;"></i>Confirm Print</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times"
                    style="margin-right: 5px;"></i>Close</button>
              </div>

            </div>
          </div>
        </div>

        <div class="modal  fade" id="templatePreviewModal" tabindex="2" role="dialog"
          aria-labelledby="templatePreviewLabel" aria-hidden="true">
          {{> custom_print_template modalId="templatePreviewModal" idPrefix="html-2-pdfwrapper_quotes"
          namePrefix="html-2-pdfwrapper_quotes" }}
        </div>

        <div
          style="width: 210mm; background-color: #ffffff; padding: 8px; height: 297mm; font-size: 13.33px; color: #000000; display:none; overflow-x: visible;"
          id="html-2-pdfwrapper_new" name="html-2-pdfwrapper_new">
          <div style="display: flex; height: fit-content; min-height: 30mm;">
            <div style="margin: 0px; padding: 16px; width: 130mm; max-width: 130mm;">
              <div style="display: flex;">
                <div style="max-width: 60mm; max-height: 30mm;">
                  <img src="assets/img/VS1.png" class="uploadedImage"
                    style="max-height: 30mm;max-width: 200px;margin-bottom: 8px;">
                </div>
                <div style="width:70mm;">
                  <div style="padding-left: 16px;font-weight: bold;">
                    <p class="o_url" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_name" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_address1" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_address2" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_city" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_state" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_reg" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_abn" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                    <p class="o_phone" style="margin-bottom: 0px; color: rgb(0 0 0);"></p>
                  </div>
                </div>
              </div>
              <div style="font-size: 14px; width:90%;">
                <p style="margin-bottom: 0px; color: rgb(0 0 0);font-weight: 600;">Customer</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0); display:none;" class="pdfCustomerName"></p>
                <div style="min-height:50px; width: 50%; margin-bottom: 0px; color: rgb(0 0 0);"
                  class="pdfCustomerAddress"></div>
              </div>
            </div>
            <div class="col-5 col-md-5 col-sm-12" style="margin: 0px; padding: 16px; border: none !important; ">
              <h4 style="font-weight: bold; font-size: 26.667px; color: rgb(0 0 0);">Invoice&nbsp;&nbsp;&nbsp; <span
                  class="print-header"></span></h4>


              <div style="display: flex; width: 100%;">
                <div style="width: 50%; padding-right: 16px;font-weight: bold;">
                  <p class="dateNumber" style="margin-bottom: 4px; color: rgb(0 0 0);">Date:</p>
                  <p class="pdfPONumber" style="margin-bottom: 4px; color: rgb(0 0 0);">P.O
                    Number:</p>
                  <!-- <p class="invoiceNumber" style="margin-bottom: 4px; color: rgb(0 0 0);">Invoice No:</p> -->
                  <p class="refNumber" style="margin-bottom: 4px; color: rgb(0 0 0);">Ref No:</p>
                  <p class="pdfTerms" style="margin-bottom: 4px; color: rgb(0 0 0);">Due Date:</p>

                  <p class="showFx" style="margin-bottom: 4px; color: rgb(0 0 0);">FX Currency:</p>

                  <p class="link" style="color: rgb(0 0 0);">Pay Link:</p>

                  <div class="mt-4" id="customfieldtablenew">
                    <p class="customfield1" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 1</p>
                    <p class="customfield2" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 2</p>
                    <p class="customfield3" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 3</p>
                  </div>
                </div>
                <div style="width: 50%; padding-left: 16px;">
                  <p class="date" style="margin-bottom: 4px; color: rgb(0 0 0);"></p>
                  <p class="po" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;"></p>
                  <!-- <p class="io" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;"></p> -->
                  <p class="ro" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;"></p>
                  <p class="due" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;"></p>
                  <p class="showFxValue" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;"></p>
                  <p class="link"
                    style="text-align: center; width : 100px; margin-bottom : -7px; color: rgb(0 0 0);color: #fff !important; background-color: #17a673; border-color: #169b6b; border-radius: 10px;     padding: 4px 8px;">
                    <a class="linkText" href=""
                      style="color: #fff !important; padding: 0px; padding-left: 5px; text-align: center;">Pay
                      Now</a>
                  </p>
                  <div class="mt-4" id="customdatatablenew">
                    <p class="customfield1data" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 1</p>
                    <p class="customfield2data" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 2</p>
                    <p class="customfield3data" style="margin-bottom: 4px; color: rgb(0 0 0);">Custom Field 3</p>
                  </div>




                </div>
              </div>
            </div>
          </div>
          <hr>
          <div style="height: 90mm;">
            <div style="margin: 8px; border: none !important; background-color: rgba(0,0,0,0);">
              <table class="invoice_print" style="width: 200mm; max-width: 200mm; margin: auto;">
                <thead style="color: rgb(251,251,251);">

                  <tr class="tbl_header" style="border-bottom: 1px solid rgba(0, 0, 0, 1);">
                  </tr>
                </thead>
                <tbody class="tbl_content" style="color: rgb(0 0 0);">
                </tbody>
              </table>
            </div>
          </div>
          <hr>
          <div style="display: flex;">
            <div style="margin: 8px; width: 100%">
              <div class="row">
                <div class="col-12">
                  <p style="font-weight: bold; color: rgb(0 0 0);">Comments</p>
                  <div id="printcomment" style="color: rgb(0 0 0);  height: 3em; line-height: 1em; overflow: hidden;">
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6 " style="border: 1px solid;">

                  <div class="row">
                    <div class="col-12">
                      <p style="font-weight: 600; color: rgb(0 0 0);">Payment Details</p>
                    </div>
                  </div>



                  <div class="row field_payment">

                    <!-- <div class="bankDetails" style="margin: 16px;">

                                </div> -->
                    <div class="col-12">
                      <p style="font-weight: 600; color: rgb(0 0 0);"></p>
                    </div>

                    <div class="col-12">

                      <p class="bsb" style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        BSB (Branch Number) :
                        <span style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);"></span>
                      </p>

                      <p class="account_number"
                        style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        Account Number: <span style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);"></span>
                      </p>

                      <p class="swift"
                        style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        Swift Code: <span style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);"></span>
                      </p>


                    </div>

                  </div>
                </div>
                <div class="col-6 field_amount">
                  <div style="margin: 8px; border: none !important;">
                    <div style="width: 100%; display: flex;">
                      <div style="padding-right: 16px; width: 50%;">
                        <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">
                          Sub Total</p>
                        <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">
                          Total GST</p>
                      </div>
                      <div style="padding-left: 16px; width: 50%;">
                        <p id="subtotal_totalPrint"
                          style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        </p>
                        <p id="totalTax_totalPrint"
                          style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        </p>
                      </div>
                    </div>
                    <div id="tax_list_print" style="width: 100%; padding-left: 16px;">
                      <div style="width: 100%; display: flex;">
                      </div>
                    </div>
                    <hr>
                    <div style="width: 100%; display: flex;">
                      <div style="padding-right: 16px; width: 50%;">
                        <p style="font-weight: 800; margin-bottom: 8px; color: rgb(0 0 0);">
                          TOTAL</p>
                      </div>
                      <div style="padding-left: 16px; width: 50%;">
                        <p id="grandTotalPrint" style="text-align: right; margin-bottom: 8px; font-weight: 800;">
                          <br>
                        </p>
                      </div>
                    </div>
                    <hr>
                    <div style="width: 100%; display: flex;">
                      <div style="padding-right: 16px; width: 50%;">
                        <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">
                          Paid Amount</p>
                        <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">
                          Balance Due</p>
                      </div>
                      <div style="padding-left: 16px; width: 50%;">
                        <p id="paid_amount"
                          style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        </p>
                        <p id="totalBalanceDuePrint"
                          style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                        </p>

                      </div>


                    </div>
                  </div>
                </div>
              </div>
            </div>


          </div>

          <div style="font-size: 10px; margin-right: 8px; float: right;">
            <p class="applied font-weight-bold" style="font-size: 14px;">Applied $50.00</p>

          </div>
          <p class="bottome-text-fix" style="font-size: 10px;
                    margin-right: 18px;
                    position: absolute;
                    bottom: 0;
                    z-index: 1111;
                    right: 0;">Page 1 of 1</p>


        </div>

        <!-- <div class="col-12 col-md-6 col-lg-4 col-xl-5">
                        <button class="btn btn-primary" type="button" id="addRow" style="margin-bottom: 120px;">+ Add New Entry</button>
                        <div class="form-group"><label>Comments</label>
                            <textarea class="form-control" rows="4" id="txaComment" name="txaComment">{{invoicerecord.comments}}</textarea>
                        </div>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4 col-xl-5 colComments">
                        <div class="form-group"><label>Picking Instructions</label>
                            <textarea class="form-control" rows="4" id="txapickmemo" name="txapickmemo">{{invoicerecord.pickmemo}}</textarea>
                        </div>
                    </div> -->
        {{> transaction_calculation
        isPartialPaid=invoicerecord.isPartialPaid
        SubTotal=invoicerecord.SubTotal
        TotalTax=invoicerecord.TotalTax
        NetTotal=invoicerecord.Total
        TotalDiscount=invoicerecord.TotalDiscount
        Total=invoicerecord.Total
        TotalPaid=invoicerecord.totalPaid
        BalanceDue=invoicerecord.balanceDue
        }}
      </div>
      <div class="row justify-content-center mobileButtons" style="display: none;">
        {{> transaction_footer margin="16px" AttachmentCount=attachmentCount TransactionType="refunds" }}
      </div>
      <div class="printID" style="display: none;"></div>
      <style>
        .lead {
          font-size: 25px;
          font-weight: 500;
          margin: 0px;
          color: #696969;
          float: right;
        }

        .leadTotal {
          font-weight: 800 !important;
        }

        .leadHidden {
          visibility: hidden;
          height: 0px !important;
        }
      </style>


      <!--
                <div class="d-xl-flex justify-content-xl-center"><button class="btn btn-success btnSave" type="button" style="margin: 16px;margin-top: 0px;width: 100px;">
                        <i class="fa fa-save" style="padding-right: 8px;"></i>Save</button>
                 <button class="btn btn-primary printConfirm" type="button" style="margin: 16px;margin-top: 0px;width: 100px;"><i class="fa fa-print" style="padding-right: 8px;"></i>Print</button>
                      <a class="btn btn-primary" role="button" style="margin: 16px;margin-top: 0px;" data-toggle="modal" href="#myModalAttachment" id="btn_Attachment" name="btn_Attachment">
                        {{#if attachmentCount}}<span id="attachment-count">{{attachmentCount}}</span>{{/if}} <i class="fa fa-paperclip" style="padding-right: 8px;"></i>Add Attachments
                    </a>
                    <button class="btn btn-secondary btnBack" type="button" style="margin: 16px;margin-top: 0px;width: 100px;"><i class="fa fa-remove" style="padding-right: 8px;"></i>Cancel</button>
                </div>
                -->
    </form>
    <!-- Start PDF -->
    <!-- A4 -->
    <div
      style="width: 210mm; background-color: #ffffff; padding: 8px; height: 297mm; font-size: 13.33px; color: #000000; display:none; overflow-x: visible;"
      id="html-2-pdfwrapper" name="html-2-pdfwrapper">
      <div style="display: flex; height: fit-content; min-height: 30mm;">
        <div style="margin: 0px; padding: 16px; width: 130mm; max-width: 130mm;">
          <div style="display: flex;">
            <div style="max-width: 60mm; max-height: 30mm;">
              <img src="assets/img/VS1.png" class="uploadedImage"
                style="max-height: 30mm;max-width: 200px;margin-bottom: 8px;">
            </div>
            <div style="width: 70mm;">
              <div style="padding-left: 16px;font-weight: bold;">
                <a href="{{organizationurl}}">{{organizationurl}}</a>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{organizationname}}</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyaddress1}}</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyaddress2}}</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{city}}</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{state}} {{poBox}} </p>
                {{#if equals companyReg ''}}

                {{else}}
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyReg}}</p>
                {{/if}}
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyabn}}</p>
                <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyphone}}</p>
              </div>
            </div>
          </div>
          <div style="font-size: 14px;">
            <p style="margin-bottom: 0px; color: rgb(0 0 0);font-weight: 600;">Customer</p>
            <p style="margin-bottom: 0px; color: rgb(0 0 0); display:none;" class="pdfCustomerName"></p>
            <div style="min-height:50px; width: 50%; margin-bottom: 0px; color: rgb(0 0 0);" class="pdfCustomerAddress">
            </div>
          </div>
        </div>
        <div style="margin: 0px; padding: 16px; border: none !important; width: 60mm; max-width: 60mm;">
          <h4 class="print-headers" style="font-weight: bold; font-size: 26.667px; color: rgb(0 0 0);">
            Invoice&nbsp;&nbsp;&nbsp; {{invoicerecord.id}}</h4>
          <div style="display: flex; width: 100%;">
            <div style="width: 50%; padding-right: 16px;font-weight: bold;">
              <label style="margin-bottom: 4px; color: rgb(0 0 0);">Date:</label>
              <label class="pdfPONumber" style="margin-bottom: 4px; color: rgb(0 0 0);">P.O Number:</label>
              <label class="pdfTerms" style="margin-bottom: 4px; color: rgb(0 0 0);">Due Date:</label>
              <label class="link" style="color: rgb(0 0 0);">Pay Link:</label>
            </div>
            <div style="width: 50%; padding-left: 16px;">
              <p style="margin-bottom: 4px; color: rgb(0 0 0);">{{invoicerecord.saledate}}</p>
              <p class="po" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;">
                {{invoicerecord.custPONumber}}.</p>
              <p class="due" style="margin-bottom: 4px; color: rgb(0 0 0); white-space: nowrap;">
                {{invoicerecord.termsName}}.</p>
              <p class="link"
                style="margin-bottom: 8px; color: rgb(0 0 0);color: #fff !important; background-color: #17a673; border-color: #169b6b; border-radius: 10px;     padding: 4px 8px;">
                <a class="linkText" href="" style="color: #fff !important; padding: 0px; padding-left: 5px;">Pay Now</a>
              </p>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div style="height: 90mm;">
        <div style="margin: 8px; border: none !important; background-color: rgba(0,0,0,0);">
          <table class="invoice_print" style="width: 200mm; max-width: 200mm; margin: auto;">
            <thead style="color: rgb(251,251,251);">
              <tr style="border-bottom: 1px solid rgba(0, 0, 0, 1);">
                <th style="width: 200px; background-color: white; color: rgb(0 0 0);">Product Name</th>
                <th style="width: 250px; background-color: white; color: rgb(0 0 0);">Description</th>
                <th style="text-align: right; width: 50px; background-color: white; color: rgb(0 0 0);">Qty</th>
                <th style="text-align: right; width: 90px; background-color: white; color: rgb(0 0 0);">Unit Price</th>
                <th style="text-align: right; width: 77px; background-color: white; color: rgb(0 0 0);">Tax</th>
                <th style="text-align: right; width: 77px; background-color: white; color: rgb(0 0 0);"
                  class="hiddenColumn">Tax</th>
                <th style="text-align: right; width: 100px; background-color: white; color: rgb(0 0 0);">Amount</th>
              </tr>
            </thead>
            <tbody style="color: rgb(0 0 0);">
              {{#each item in invoicerecord.LineItems}}
              <tr id={{item.lineID}} style="border-bottom: 1px solid rgba(0, 0, 0, .1);">
                <td id="lineProductName">{{item.item}}</td>
                <td id="lineProductDesc">{{item.description}}</td>
                <td id="lineQty" style="text-align: right;">{{item.quantity}}</td>
                <td id="lineUnitPrice" style="text-align: right;">{{item.unitPrice}}</td>
                <td id="lineTaxAmount" style="text-align: right;">{{item.TaxTotal}}</td>
                <td id="lineTaxCode" class="hiddenColumn" style="text-align: right;">{{item.taxCode}}</td>
                <td id="lineAmt" style="text-align: right;">{{item.TotalAmt}}</td>
              </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
      <hr>
      <div style="display: flex;">
        <div style="margin: 8px; width: 100%;">
          <div class="row">
            <div class="col-12">
              <p style="font-weight: 600; color: rgb(0 0 0);">Comments</p>
              <div id="printcomment" style="color: rgb(0 0 0);  height: 3em; line-height: 1em; overflow: hidden;">
                {{invoicerecord.comments}}</div>
            </div>
          </div>
          <div class="row">
            <div class="col-6" style="border: 1px solid;">
              <div class="row">
                <div class="col-12">
                  <p style="font-weight: 600; color: rgb(0 0 0);">Payment Details</p>
                </div>
                <!-- <div class="bankDetails" style="margin: 16px;">

            </div> -->
                <div class="col-12">
                  {{#if vs1companyBankAccountName}}
                  <p style="font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankName}}</p>
                  {{/if}}
                </div>

                <div class="col-12">
                  {{#if vs1companyBankAccountName}}
                  <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">Name: <span
                      style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);">{{vs1companyBankAccountName}}</span>
                  </p>
                  {{/if}}
                  <!-- <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">Account Name</p> -->
                  {{#if vs1companyBankBSB}}
                  <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                    {{bsbRegionName}}: <span
                      style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);">{{vs1companyBankBSB}}</span></p>
                  {{/if}}
                  {{#if vs1companyBankAccountNo}}
                  <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">Account Number:
                    <span
                      style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);">{{vs1companyBankAccountNo}}</span>
                  </p>
                  {{/if}}
                  {{#if vs1companyBankSwiftCode}}
                  <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">Swift Code:
                    <span
                      style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);">{{vs1companyBankSwiftCode}}</span>
                  </p>
                  {{/if}}
                  {{#if vs1companyBankRoutingNo}}
                  <p style="text-align: left; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">Routing No:
                    <span
                      style="margin-bottom: 8px; font-weight: 800; color: rgb(0 0 0);">{{vs1companyBankRoutingNo}}</span>
                  </p>
                  {{/if}}
                </div>
                <!-- <div class="col-6">
            <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankAccountName}}</p>
            <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankBSB}}</p>
            <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankAccountNo}}</p>
            <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankSwiftCode}}</p>
            <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">{{vs1companyBankRoutingNo}}.</p>
            </div> -->
              </div>
            </div>
            <div class="col-6">
              <div style="margin: 8px; border: none !important;">
                <div style="width: 100%; display: flex;">
                  <div style="padding-right: 16px; width: 50%;">
                    <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">Sub Total</p>
                    <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">Total GST</p>
                  </div>
                  <div style="padding-left: 16px; width: 50%;">
                    <p id="subtotal_totalPrint"
                      style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                      {{invoicerecord.SubTotal}}</p>
                    <p id="totalTax"
                      style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                      {{invoicerecord.TotalTax}}</p>
                  </div>
                </div>
                <div id="tax_list_print" style="width: 100%; padding-left: 16px;">
                  <div style="width: 100%; display: flex;">
                  </div>
                </div>
                <hr>
                <div style="width: 100%; display: flex;">
                  <div style="padding-right: 16px; width: 50%;">
                    <p style="font-weight: 800; margin-bottom: 8px; color: rgb(0 0 0);">TOTAL</p>
                  </div>
                  <div style="padding-left: 16px; width: 50%;">
                    <p id="grandTotalPrint" style="text-align: right; margin-bottom: 8px; font-weight: 800;">
                      {{invoicerecord.Total}}<br></p>
                  </div>
                </div>
                <hr>
                <div style="width: 100%; display: flex;">
                  <div style="padding-right: 16px; width: 50%;">
                    <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">Paid Amount</p>
                    <p style="font-weight: 600; margin-bottom: 8px; color: rgb(0 0 0);">Balance Due</p>
                  </div>
                  <div style="padding-left: 16px; width: 50%;">
                    <p style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                      {{invoicerecord.totalPaid}}</p>
                    <p id="totalBalanceDuePrint"
                      style="text-align: right; margin-bottom: 8px; font-weight: 600; color: rgb(0 0 0);">
                      {{invoicerecord.balanceDue}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
      <p class="bottome-text-fix" style="font-size: 10px;
                margin-right: 18px;
                position: absolute;
                bottom: 0;
                z-index: 1111;
                right: 0;">Page 1 of 1</p>
    </div>
    <!-- Letter -->
    <div
      style="width: 216mm;background-color: #ffffff;padding: 8px;height: 279mm; font-size: 13.33px; display:none; color: #000000;"
      id="html-2-pdfwrapperLetter" name="html-2-pdfwrapperLetter">
      <div class="d-xl-flex align-items-xl-start" style="height: 100%;">
        <div class="d-flex d-xl-flex flex-column flex-nowrap align-items-xl-center"
          style="min-height: 100%;height: 100%;max-height: 100%;">
          <div class="d-lg-flex d-xl-flex flex-row align-items-lg-start align-items-xl-start">
            <div class="card flex-grow-1 specialcard"
              style="margin: 0px; border: none !important; width: 140mm; max-width: 140mm; background-color: rgba(0,0,0,0);">
              <div class="card-body">
                <div class="d-lg-flex justify-content-lg-start" style="margin-bottom: 16px;">
                  <div class="d-lg-flex flex-column justify-content-lg-start"><img src="assets/img/VS1.png"
                      class="uploadedImage" style="width: 200px;margin-bottom: 8px;"><a href="#">www.vs1cloud.com</a>
                  </div>
                  <div class="d-lg-flex d-xl-flex justify-content-lg-center align-items-xl-start card-text">
                    <div style="padding-left: 16px;font-weight: bold;">
                      <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{organizationname}}</p>
                      <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyaddress1}}</p>
                      <p style="margin-bottom: 8px; color: rgb(0 0 0);">{{companyaddress2}}</p>
                      {{#if equals companyReg ''}}

                      {{else}}
                      <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyReg}}</p>
                      {{/if}}
                      <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{companyabn}}</p>
                      <p style="margin-bottom: 0px; color: rgb(0 0 0);">Phone: {{companyphone}}</p>
                    </div>
                  </div>
                </div>
                <div style="font-size: 14px;">
                  <h5 style="margin-bottom: 0px;font-weight: bold; color: rgb(0 0 0);">Customer</h5>
                  <p style="margin-bottom: 0px; display:none;" class="pdfCustomerName">Big Burtha</p>
                  <p style="margin-bottom: 0px; color: rgb(0 0 0);" class="pdfCustomerAddress">12 Golf Drive</p>
                  <!-- <p style="margin-bottom: 0px;">Caulifield South Vic 9820</p>
<p style="margin-bottom: 0px;">Australia</p> -->
                </div>
              </div>
            </div>
            <div class="card flex-grow-1 specialcard"
              style="margin: 0px; border: none !important;  width: 65mm; max-width: 65mm; background-color: rgba(0,0,0,0);">
              <div class="card-body">
                <h4 class="card-title" style="font-weight: bold; font-size: 26.667px; color: rgb(0 0 0);">
                  Invoice&nbsp;&nbsp;&nbsp; {{invoicerecord.id}}</h4>
                <div class="d-lg-flex d-xl-flex align-items-xl-start card-text">
                  <div class="d-lg-flex d-xl-flex flex-column align-items-lg-start align-items-xl-start"
                    style="padding-right: 16px;font-weight: bold;">
                    <label class="text-nowrap" style="margin-bottom: 0px; color: rgb(0 0 0);">Date:</label>
                    <label class="text-nowrap" style="margin-bottom: 0px; color: rgb(0 0 0);">P.O Number:</label>
                    <label class="text-nowrap" style="margin-bottom: 0px; color: rgb(0 0 0);">Terms:</label>
                  </div>
                  <div style="padding-left: 16px;">
                    <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{invoicerecord.saledate}}</p>
                    <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{invoicerecord.custPONumber}}</p>
                    <p style="margin-bottom: 0px; color: rgb(0 0 0);">{{invoicerecord.termsName}}</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex-grow-1">
            <div class="card flex-grow-1 specialcard"
              style="margin: 8px; border: none !important;background-color: rgba(0,0,0,0);">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-sm" style="width: 200mm; max-width: 200mm;">
                    <thead class="text-secondary" style="color: rgb(251,251,251);">
                      <tr style="border: none !important;">
                        <th class="text-nowrap" style="width: 116px; background-color: white; color: rgb(0 0 0);">
                          Product Name</th>
                        <th class="text-nowrap" style="width: 289px; background-color: white; color: rgb(0 0 0);">
                          Description</th>
                        <th class="text-nowrap text-left"
                          style="width: 50px; background-color: white; color: rgb(0 0 0);">Qty</th>
                        <th class="text-nowrap text-left"
                          style="width: 90px; background-color: white; color: rgb(0 0 0);">Unit Price</th>
                        <th class="text-nowrap text-left"
                          style="width: 77px; background-color: white; color: rgb(0 0 0);">Tax</th>
                        <th class="text-nowrap text-left"
                          style="width: 100px; background-color: white; color: rgb(0 0 0);">Amount</th>
                      </tr>
                    </thead>
                    <tbody style="color: rgb(0 0 0);">
                      {{#each item in invoicerecord.LineItems}}
                      <tr>
                        <td>{{item.item}}</td>
                        <td>{{item.description}}</td>
                        <td class="text-right">{{item.quantity}}</td>
                        <td class="text-nowrap text-right">{{item.unitPrice}}</td>
                        <td class="text-nowrap text-right">{{item.taxRate}}</td>
                        <td class="text-nowrap text-right">{{item.TotalAmt}}</td>
                      </tr>

                      {{/each}}


                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="flex-grow-0" style="width: 100%;">
            <hr style="margin: 0px;">
            <div class="d-lg-flex d-xl-flex flex-grow-1 align-items-lg-start align-items-xl-start" style="width: 100%;">
              <div class="card flex-grow-1 specialcard"
                style="margin: 8px; min-width: 90mm;max-width: 90mm;width: 90mm; background-color: rgba(0,0,0,0);">
                <div class="card-body" style="min-width: 350.344px;max-width: 350.344px;width: 350.344px;">
                  <h4 class="card-title" style="font-size: 20px;font-weight: bold; color: rgb(0 0 0);">Comments</h4>
                  <p style="color: rgb(0 0 0);">{{invoicerecord.comments}}</p>
                </div>
              </div>
              <div class="card flex-grow-1 specialcard"
                style="margin: 8px; border: none !important; min-width: 110mm;max-width: 110mm;width: 110mm; background-color: rgba(0,0,0,0);">
                <div class="card-body float-right">
                  <div class="d-lg-flex d-xl-flex flex-row justify-content-lg-center align-items-xl-start card-text">
                    <div class="d-lg-flex d-xl-flex flex-column align-items-lg-start align-items-xl-start"
                      style="padding-right: 16px;"><label class="text-nowrap"
                        style="font-weight: 600; color: rgb(0 0 0);">Sub
                        Total</label><label class="text-nowrap" style="font-weight: 600; color: rgb(0 0 0);">Total
                        GST</label></div>
                    <div class="d-lg-flex flex-column flex-grow-1 justify-content-lg-end" style="padding-left: 16px;">
                      <p class="text-right" style="margin-bottom: 8px;font-weight: 600; color: rgb(0 0 0);">
                        {{invoicerecord.SubTotal}}</p>
                      <p class="text-right" style="margin-bottom: 8px;font-weight: 600; color: rgb(0 0 0);">
                        {{invoicerecord.TotalTax}}</p>
                    </div>
                  </div>
                  <hr>
                  <div class="d-lg-flex d-xl-flex align-items-lg-start align-items-xl-start card-text">
                    <div class="d-xl-flex flex-column flex-grow-1 align-items-xl-start" style="padding-right: 16px;">
                      <label class="text-nowrap" style="font-weight: 800; color: rgb(0 0 0);">TOTAL&nbsp;</label></div>
                    <div class="flex-grow-1" style="padding-left: 16px;">
                      <p class="text-right flex-grow-1" style="margin-bottom: 8px;font-weight: 800; color: rgb(0 0 0);">
                        {{invoicerecord.Total}}<br></p>
                    </div>
                  </div>
                  <hr>
                  <div class="d-lg-flex d-xl-flex flex-row justify-content-lg-center align-items-xl-start card-text">
                    <div class="d-lg-flex d-xl-flex flex-column align-items-lg-start align-items-xl-start"
                      style="padding-right: 16px;"><label class="text-nowrap"
                        style="font-weight: 600; color: rgb(0 0 0);">Paid
                        Amount</label><label class="text-nowrap" style="font-weight: 600; color: rgb(0 0 0);">Balance
                        Due</label></div>
                    <div class="d-lg-flex flex-column flex-grow-1 justify-content-lg-end" style="padding-left: 16px;">
                      <p class="text-right" style="margin-bottom: 8px;font-weight: 600; color: rgb(0 0 0);">
                        {{invoicerecord.totalPaid}}</p>
                      <p class="text-right" style="margin-bottom: 8px;font-weight: 600; color: rgb(0 0 0);">
                        {{invoicerecord.balanceDue}}</p>
                    </div>
                  </div>
                </div>
              </div>
            </div><span class="d-lg-flex d-xl-flex justify-content-lg-end justify-content-xl-end"
              style="font-size: 10px;margin-right: 8px;">Page 1 of 1</span>
          </div>
        </div>
      </div>
    </div>
    <!-- END PDF -->
    {{/if}}
    {{> all_transaction_modals customerRecord=customerRecord}}
  </div>

  <!-- Start Help Video Modal -->
  <div class="modal fade" role="dialog" tabindex="-1" id="helpModal">
    <div class="modal-dialog" role="document" style="max-width: 670px!important;">
      <div class="modal-content">
        <div class="modal-header">

          <h4 class="title-header">Refund</h4>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
              aria-hidden="true">×</span></button>
        </div>
        <div class="modal-body">
          <!-- <iframe width="640" height="360" src="https://player.vimeo.com/video/99892791" frameborder="0" allowfullscreen=""></iframe> -->
          <!-- <iframe width="640" height="360" src="https://www.youtube.com/embed/BzxoYOp42fg" frameborder="0" allowfullscreen=""></iframe> -->
          <video preload="none" id="myVideo" width="640" height="360" controls="" name="media"
            style="border: solid 5px #999999f0; height: auto; outline: none;">
            <source src="https://erphelpes.com/vs1videos/newrefund.mp4" type="video/mp4">
          </video>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade customerListModal" role="dialog" tabindex="-1" id="customerListModal">
    <div class="modal-dialog modal-xl modal-dialog-scrollable customerListModalInner" role="document"
      style="max-width: 90vw;">
      <div class="modal-content customerListContent">
        <div class="modal-header">
          <h4>Customer List</h4><button type="button" class="close checkclose" data-dismiss="modal"
            aria-label="Close"><span aria-hidden="true">×</span></button>
        </div>
        <div class="modal-body mainCustomerModalBody" style="padding: 0px; overflow-x: hidden;">
          <input type="hidden" style="width: 100%; display:none;" id="customerSelectLineID" name="customerSelectLineID"
            readonly>
          {{> customerlistpop}}

        </div>
        <div class="modal-footer"><button class="btn btn-light checkclose" data-dismiss="modal"
            type="button">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="paymentMethodModal">
    {{> paymentmethodpop}}
  </div>

  <div class="modal fade" role="dialog" tabindex="-1" id="newPaymentMethodModal">
    {{> newpaymentmethodpop}}
  </div>
  <!-- End Help Video Modal -->
  <script>
    modalDraggable();
  </script>
</template>